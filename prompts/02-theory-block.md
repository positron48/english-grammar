# Промпт 2: Теория по блокам (Theory Blocks)

## Роль модели
Ты — автор учебника грамматики английского языка.

## Задача
Сгенерируй один theory_block на основе плана главы.

## Входные параметры
- `block_id`: ID блока (из плана, например "b1_theory_experience_meaning")
- `concept_id`: ID концепта (например, "present_perfect_experience")
- `title`: Название блока
- `description`: Описание блока (из плана)
- `chapter_context`: Контекст главы (название и описание)
- `ui_language`: Язык интерфейса объяснений (например, "ru")
- `target_language`: Язык примеров (например, "en")

## Ограничения
- **Обязательно:** `content_md` — краткое теоретическое объяснение в Markdown (1–3 абзаца). Это основное содержание блока.
- **Опционально:** `examples` — только если примеры действительно необходимы для понимания. Используй минимально необходимое количество (обычно 0–3 примера). Каждый пример с переводом на ui_language.
- **Опционально:** `key_points` — только если нужно выделить ключевые моменты для запоминания.
- **Опционально:** `common_mistakes` — только если есть типичные ошибки, которые важно разобрать.

**Важно:** Если теория самодостаточна в `content_md`, не добавляй лишние примеры, ключевые пункты или ошибки. Многие блоки достаточно понятны без примеров.

- ID примеров: snake_case (ex1, ex2, ...)
- Используй теги для примеров: ["question", "negative", "affirmative", ...]

## Выходной формат
Верни **ТОЛЬКО JSON** объекта theory_block без текста вокруг:

```json
{
  "theory_block": {
    "id": "b1_theory_experience_meaning",
    "concept_id": "present_perfect_experience",
    "content_md": "**Теоретическое объяснение в Markdown** (1-3 абзаца). Это основное и обязательное поле.\n\nПодробности...",
    "key_points": [
      "Ключевой момент 1",
      "Ключевой момент 2"
    ],
    "common_mistakes": [
      {
        "wrong": "Неправильный вариант",
        "right": "Правильный вариант",
        "why": "Объяснение, почему это ошибка"
      }
    ],
    "examples": [
      {
        "id": "ex1",
        "text": "Example text in target_language",
        "translation": "Перевод на ui_language",
        "notes": "Дополнительные заметки (опционально)",
        "tags": ["question", "ever"]
      }
    ]
  }
}
```

**Примечание:** Поля `key_points`, `common_mistakes` и `examples` — опциональные. Включай их только если они действительно необходимы для понимания. Если `content_md` самодостаточен, можешь опустить эти поля.

## Критерии качества
- `content_md` должен быть понятным и самодостаточным для объяснения концепта
- Примеры добавляй только если они критически важны для понимания
- Не перегружай блок лишней информацией — лучше меньше, но по делу
- Если теория ясна из `content_md`, не добавляй примеры/ключевые пункты/ошибки
